<!-- D3 js examples with data loading -->
<!DOCTYPE html>
<html>
  <head>
      <meta name="description" content="D3 examples"/>
      <meta charset="utf-8">
  </head>
  <body>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script>
      var urljson = "https://gist.githubusercontent.com/d3byex/e5ce6526ba2208014379/raw/8fefb14cc18f0440dc00248f23cbf6aec80dcc13/walking_dead_s5.json";
      var urlcsv = "https://gist.githubusercontent.com/d3byex/e5ce6526ba2208014379/raw/8fefb14cc18f0440dc00248f23cbf6aec80dcc13/walking_dead_s5.csv";
      d3.csv( urlcsv, function(error, data){
        var mappedAndConverted = data.map(function(d){
          return {
            Episode: +d.Episode,
            USViewers : +d.USViewers,
            Title: d.Title
          };
        });
        console.log("mapped and converted");
        console.log(mappedAndConverted);
      console.log(mappedAndConverted);
      var viewership = mappedAndConverted.map(function (d){
        return d.USViewers;
      });
      var minViewership = d3.min(viewership);
      var maxViewership = d3.max(viewership);

      var minBarHeight = 100, maxBarHeight =400;
      var yScale = d3.scale
                     .linear()
                     .domain([minViewership, maxViewership])
                     .range([minBarHeight, maxBarHeight]);
      console.log(minViewership + "->" + yScale(minViewership));
      console.log(maxViewership + "->" + yScale(maxViewership));
    });
    </script>
  </body>
</html>
